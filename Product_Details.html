<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="normalize.css">
        <link rel="stylesheet" href="style.css">
        <script src="CheckLogin.js"></script>
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

        <style>
            main{
                width: 80%;
                margin: auto;
                background-color: rgba(231, 231, 231, 0.566);
                margin-top: 50px;
                display: flex;
                flex-direction: row;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            }
            #product-image img{
                width: 550px;
                height:550px;
                border-radius: 10px;
                margin: 3%;
            }
            #informations{
                display: flex;
                flex-direction: column;
               
                margin-left: 6%;
                
            }
            #product-name{
                font-size:1.8rem;
                margin-bottom: 0;
                
            }
            #sales{
                display: flex;
                flex-direction: row;
                
            }
            .info{
                display: flex;
                flex-direction: row;
                align-items: center;
                margin-right:18%;
            }
            .info p{
                
                font-size: 1.2rem;
                margin-right: 8%;
            }
            .info div{
                font-size: 1.5rem;
                font-weight: bold;
            }
            #price{
                margin-top: 1%;
                font-size: 3.5rem;  
                font-weight: bold;
            }
            .Guarantee{
                display: flex;
                flex-direction: row;
                align-items: center;
                margin-top: 2%;
            }
            .Guarantee div{
                width: 10%;
                color:rgb(83, 83, 83);
                margin-right: 5% ;
                
            }
            .Guarantee img{
                width: 5%;
                margin-right: 10px;
            }
            
            #quantity{
                display: flex;
                flex-direction: row;
                margin-top: 2%;
                align-items: center;
            }
            #quantity button{
                height: 40px;
                width: 40px;
                font-size: 2rem;
                cursor: pointer;
            }
            #quantity div{
                margin-right: 7%;
            }
            #quantity p{

                width: 65px;
                height: 38px;
                display: flex;
                justify-content:center ;
                align-items: center;
                border: 1px solid black;
                font-size: 1.3rem;
                color: #940385;
                font-weight: 550;
            }
            #buying{
                margin-top: 5%;
                display: flex;
                flex-direction: row;
               
            }
            #buying button{
                width: 200px;
                height: 60px;
                margin-right: 30px;
                cursor: pointer;
            }
            #ToCart{
                display: flex;
                flex-direction: row;
                align-items: center;
                background-color: #ff00ea38;
                border: 1px solid #940385;;
            }
            #ToCart i{
                font-size: 1.8rem;
                margin-right: 10px;
                margin-left: 20px;
            }
            #ToCart:hover{
                background-color: #ff00ea1a;
            } 
            #buynow{
                background-color: #b802a5;
                color: white;
                border: none;
            }
            #buynow:hover{
                background-color: #e301cd;
            
            }
            #like{
                border: none;
                margin-top: 10px;
                background-color: transparent;
                font-size: 2.8rem;
                cursor: pointer;
                
            }
             /* Popup Background */
             .popup {
                display: none; /* Hidden by default */
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black background */
                justify-content: center;
                align-items: center;
            }

            /* Popup Box */
            .popup-content {
                background: white;
                padding: 20px;
                width: 300px;
                height: 200px;
                text-align: center;
                border-radius: 10px;
                position: relative;
            }

            /* Close Button */
            .close {
                position: absolute;
                top: 10px;
                right: 15px;
                font-size: 20px;
                cursor: pointer;
            }
            #buy-section{
                display: flex;
                flex-direction: column;
               
                margin-left: 6%;
            }
            
        </style>
    </head>
    <body>
        <header>
            <div id="logo">
              <a href="index.html" >
                <img src="Images/logo.jpeg" alt="">
              </a>
            </div>

            <section id="header-icons">
              <div id="header-category">
                  <a href="Home_tool.html" class="head-category">

                    <p >Home Tools</p>
                  </a>
                  <a href="cars.html" class="head-category">

                    <p>Cars</p>
                  </a>
                  <a href="home-services.html" class="head-category">

                    <p>Toys</p>
                  </a>
                  <a href="gadgets.html" class="head-category">

                    <p>Mobile Phones & Gadgets</p>
                  </a>
                  <a href="womens-fashion.html" class="head-category">
                    <p>Women's Fashion</p>
                  </a>
                  <a href="mens-fashion.html" class="head-category" >
                    <p>Men's Fashion</p>
                  </a>

                  <a href="luxury.html" class="head-category">
                    <p>Bicycles</p>
                  </a>

                  <a href="SignUp.html" class="register-button">
                    <p>Sign Up</p>
                  </a>

                  <a href="Login.html" class="register-button">
                    <p>Login</p>
                  </a>

                  
                    <div id="accountContainer" style="display: none;">
                      <button id="accountBtn" class="account-button">
                        <div id="avatar"></div>
                        <span id="usernameDisplay"></span>
                      </button>
                    </div>
                    
                  
                </div>
                  
                  

              </div>
              <div id="second-row">
                <div id="search-box">
                  <i class='bx bx-search'></i>

                  <input type="text" id="input-box" placeholder="Search anything" autocomplete="off">

                </div>

                <div id="function-buttons" style="display: none;" >
                  <a href="wishlist.html" aria-label="Wishlist">
                      <i class='bx bx-heart'></i>
                  </a>
          
                  <a href="cart.html" aria-label="Cart">
                      <i class='bx bx-cart-alt'></i>
                  </a>

                  
                </div>
              </div>
            </section>

        
        </header>
        <main>
        
            <div id="product-image">

                <img src="Images/phone.jpg" alt="">
            </div>


            <section id="informations" >
                <h2 id="product-name" ></h2>
                <p id="description"></p>

                <section id="sales">
                    <div class="info"> 
                        <p>Rating: </p>
                        <div id="rating"></div>

                    </div>
                    <div class="info">
                        <p>Review: </p>
                        <div id="review"></div>
                        

                    </div>
                    <div class="info">
                        <p >Sold: </p>
                        <div id="sold"></div>

                    </div>
                </section>

                
                <div id="price"></div>

                <div class="Guarantee">
                    <div>Shipping</div>
                    <img src="Images/Delivery.png" alt="" style="margin-right: 10px;">
                    <p>Guaranteed to get in 8 days, with shipping fee $0.00 - $1.99</p>
                </div>
                

                <div class="Guarantee">
                    <div>Shopping Guarantee</div>
                    <img src="Images/Guarantee.png" alt="" style="margin-right: 10px;">
                    <p>15-Day Free Returns</p>
                </div>


                <section id="quantity">
                    <div>Quantity</div>
                    <button id="minus" >-</button>
                    <p id="quantityNo">1</p>
                    <button id="add">+</button>

                </section>

                <div id="buying">
                    <button id="ToCart">
                        <i class='bx bx-cart-add' ></i>
                        <p>Add To Cart</p>
                    </button>

                    <button id="buynow">
                        <p>Buy Now</p>
                    </button>
                    <div id="like">
                        <i class='bx bx-heart' ></i>
                        <i class='bx bxs-heart' style='color:#fe2020; display: none; '  ></i>
                    </div>
                    
                    
                </div>

            </section>

            <section id="buy-section">
                <h2 id="buy-name" >wefwe</h2>
                <button id="openPopup">Open Popup</button>



                <div id="popup" class="popup">
                    <div class="popup-content">
                        <span class="close">&times;</span>
                        <h2>Popup Title</h2>
                        <p>This is a centered popup!</p>
                    </div>
                </div>


            </section>
            

            

        </main>
        <script>
            
            document.getElementById("openPopup").addEventListener("click", function () {
                document.getElementById("popup").style.display = "flex";
            });

            document.querySelector(".close").addEventListener("click", function () {
                document.getElementById("popup").style.display = "none";
            });

            // Optional: Close when clicking outside the popup
            document.getElementById("popup").addEventListener("click", function (event) {
                if (event.target === this) {
                    this.style.display = "none";
                }
            });



            async function fetchProducts() {
                const API_URL = 'https://mokesold-2e4b.restdb.io/rest/products'; 
                const API_KEY = '67a670f5df7c26d07d9657c0';

                try {
                    const response = await fetch(API_URL, {
                        method: 'GET',
                        headers: {
                            'x-apikey': API_KEY,
                            'Content-Type': 'application/json'
                        }
                    });
                    if (!response.ok) {
                        throw new Error('Failed to fetch products');
                    }
                    const data = await response.json();
                    return data;
                } catch (error) {
                    console.error('Error fetching products:', error);
                    return [];
                }
            }

            async function getProductByName() {
                const chosenProductName = localStorage.getItem("ChosenProduct"); // Get stored product name

                if (!chosenProductName) {
                    console.error("No product name found in localStorage");
                    return;
                }

                const products = await fetchProducts(); // Fetch all products

                // Find the product that matches the chosen name
                const selectedProduct = products.find(product => product.name === chosenProductName);

                if (selectedProduct) {
                    console.log("Selected Product:", selectedProduct);
                    // Do something with the selected product, e.g., display it on the page
                    
                    document.getElementById("product-name").textContent = chosenProductName;
                    document.getElementById("description").textContent = selectedProduct.description
                    document.getElementById("product-image").querySelector("img").src ="Product_Images/"+selectedProduct.image_name;
                    document.getElementById('rating').textContent = selectedProduct.ratings
                    document.getElementById('review').textContent = selectedProduct.reviews
                    document.getElementById('sold').textContent = selectedProduct.sold
                    document.getElementById("price").textContent  ="$"+selectedProduct.price_sg
                    
                } 
                else 
                {
                    console.error("Product not found");
                }
            }

            // Call the function to fetch and display the product
            getProductByName();


           var number = 1;
           document.getElementById("minus").addEventListener("click", () => {
                if (number > 1) 
                { // Prevent going below 1
                    number--;
                    document.getElementById("quantityNo").textContent = number;
                }
            });


            document.getElementById("add").addEventListener("click", () => {
                if(number < 100)
                {
                    number++;
                    document.getElementById("quantityNo").textContent = number; 
                }   
                
            });

            const buyBtn = document.getElementById("buynow");
            buyBtn.addEventListener("click", function() {
               document.getElementById("informations").style.display = 'None'
              
                
            });


            const likeButton = document.getElementById("like");
            let isLiked = false; // Track like state


            likeButton.addEventListener("click", function() {
                isLiked = !isLiked; // Toggle state
                if (isLiked) {
                    this.innerHTML = "<i class='bx bxs-heart' style='color:#cb0505'></i>"; // Stay red when clicked
                } else {
                    this.innerHTML = "<i class='bx bx-heart'></i>"; // Back to normal when clicked again
                }
            });

           


        </script>
    </body>
</html>